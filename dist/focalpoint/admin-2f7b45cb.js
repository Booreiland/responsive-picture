/*!
 * 
 * ResponsivePics
 * 
 * @author Booreiland
 * @version 1.4.0
 * @link https://responsive.pics
 * @license undefined
 * 
 * Copyright (c) 2022 Booreiland
 * 
 * This software is released under the [MIT License](https://github.com/booreiland/responsive-pics/blob/master/LICENSE)
 */
(window.wpackioresponsivePicsfocalpointJsonp=window.wpackioresponsivePicsfocalpointJsonp||[]).push([[0],[function(t,i,o){o(1),o(2),t.exports=o(3)},function(t,i,o){var a="responsivePicsdist".replace(/[^a-zA-Z0-9_-]/g,"");o.p=window["__wpackIo".concat(a)]},function(t,i){!function(t){var i=this,o={init:function(t){o.wrapper=$imageFocalWrapper,o.picker=$imageFocalClickarea,o.point=$imageFocalPoint,o.x=t.x,o.y=t.y,o.positionFocalPoint(t),o.setEventListeners()},setEventListeners:function(){o.picker.on("click",o.setFocalPoint),o.point.draggable({cursor:"move",start:o.startDrag,drag:o.dragging,stop:o.stopDrag,containment:o.wrapper})},positionFocalPoint:function(t){o.point.css({left:"".concat(t.x,"%"),top:"".concat(t.y,"%")})},setFocalPoint:function(a){var e=a.offsetY-o.point.height()/2,n=a.offsetX-o.point.width()/2;o.point.css({left:n,top:e}),o.x=Math.round((a.pageY-t(i).offset().top)/o.picker.height()*100),o.y=Math.round((a.pageX-t(i).offset().left)/o.picker.width()*100),console.log("setFocalPoint",o.x,o.y)},startDrag:function(i){t("body").addClass("focal-point-dragging"),console.log("start drag",o.x,o.y)},dragging:function(t){o.x=Math.round(t.target.offsetLeft/o.picker.width()*100),o.y=Math.round(t.target.offsetTop/o.picker.height()*100),console.log("dragging",o.x,o.y)},stopDrag:function(i){t("body").removeClass("focal-point-dragging"),console.log("stop drag",o.x,o.y)}};t(document).ready((function(){var i=function(t){var i=wp.media.template("attachment-select-focal-point"),o=t.find(".thumbnail"),a=t.find(".details-image");i&&(o.prepend(i),$imageFocal=t.find(".image-focal"),$imageFocalWrapper=t.find(".image-focal__wrapper"),$imageFocalPoint=t.find(".image-focal__point"),$imageFocalClickarea=t.find(".image-focal__clickarea"),a.prependTo($imageFocalWrapper),$image=$imageFocalWrapper.find(".details-image"));var e=wp.media.template("attachment-save-focal-point"),n=t.find(".attachment-actions");e&&n.append(e)},a=function(i){var o=i.get("compat");if(o.item)return{x:t(o.item).find(".compat-field-responsive_pics_focal_point_x input").val(),y:t(o.item).find(".compat-field-responsive_pics_focal_point_y input").val()}},e=function(){$imageFocalWrapper.css({width:"".concat($image.width(),"px")})},n=function(i){var n=a(i);$image.on("load",(function(t){e(),o.init(n)})),t(window).on("resize",e)},c=wp.media.view.Attachment.Details.TwoColumn;wp.media.view.Attachment.Details.TwoColumn=c.extend({initialize:function(){this.model.on("change:compat",this.change,this)},render:function(){wp.media.view.Attachment.prototype.render.apply(this,arguments);var t=this.model.attributes.type;return"image"===t&&(i(this.$el),n(this.model)),this},change:function(){"image"===this.model.attributes.type&&(focalPoint=a(this.model),o.x=focalPoint.x,o.y=focalPoint.y,o.positionFocalPoint(focalPoint))}})}))}(jQuery)},function(t,i,o){}],[[0,1]]]);
//# sourceMappingURL=admin-2f7b45cb.js.map